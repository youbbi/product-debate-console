<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Council Framework - Product Strategy Debate Console</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
    <style>
        .framework-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .back-link:hover {
            color: var(--primary-hover);
        }

        .framework-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
        }

        .framework-section h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .framework-section h3 {
            color: var(--text);
            margin: 24px 0 12px;
            font-size: 1.2em;
        }

        .framework-section p {
            line-height: 1.7;
            color: var(--text-muted);
            margin-bottom: 16px;
        }

        .stage-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .stage-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 24px;
            background: var(--bg);
            border: 2px solid var(--border);
            border-radius: 12px;
            min-width: 160px;
            transition: all 0.2s;
        }

        .stage-box:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .stage-number {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            font-weight: 700;
            font-size: 1.2em;
        }

        .stage-name {
            font-weight: 600;
            color: var(--text);
        }

        .stage-desc {
            font-size: 0.85em;
            color: var(--text-muted);
            text-align: center;
        }

        .arrow {
            font-size: 1.5em;
            color: var(--border);
        }

        .provider-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin: 24px 0;
        }

        .provider-card {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
        }

        .provider-card h4 {
            margin-bottom: 8px;
            color: var(--text);
        }

        .provider-card p {
            font-size: 0.9em;
            margin-bottom: 0;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 14px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .comparison-table th {
            background: var(--bg);
            font-weight: 600;
            color: var(--text);
        }

        .comparison-table tr:hover {
            background: rgba(37, 99, 235, 0.02);
        }

        .matrix-example {
            background: var(--bg);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .matrix-example table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }

        .matrix-example th,
        .matrix-example td {
            padding: 10px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .matrix-example th {
            background: var(--surface);
        }

        .score-cell {
            font-weight: 600;
        }

        .score-cell.high { color: var(--success); }
        .score-cell.medium { color: var(--warning); }
        .score-cell.low { color: var(--error); }

        .advantage-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin: 24px 0;
        }

        .advantage-item {
            display: flex;
            gap: 12px;
            padding: 16px;
            background: var(--bg);
            border-radius: 12px;
        }

        .advantage-icon {
            font-size: 1.5em;
            flex-shrink: 0;
        }

        .advantage-text h4 {
            color: var(--text);
            margin-bottom: 4px;
        }

        .advantage-text p {
            font-size: 0.9em;
            margin: 0;
        }

        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 12px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85em;
            overflow-x: auto;
            margin: 20px 0;
        }

        .credit {
            text-align: center;
            padding: 20px;
            color: var(--text-muted);
            font-size: 0.9em;
        }

        .credit a {
            color: var(--primary);
        }
    </style>
</head>
<body>
    <div class="console framework-container">
        <a href="/" class="back-link">
            <span>&larr;</span> Back to Console
        </a>

        <!-- Header -->
        <header class="header">
            <h1>LLM Council Framework</h1>
            <p class="subtitle">Multi-model peer review for robust AI decisions</p>
        </header>

        <!-- Introduction -->
        <section class="framework-section">
            <h2>What is LLM Council?</h2>
            <p>
                The LLM Council is a decision-making framework inspired by <strong>Andrej Karpathy's</strong> concept
                of using multiple AI models to overcome "Model Monoculture Syndrome" - the risk of relying on a single
                AI provider's biases and failure modes.
            </p>
            <p>
                Instead of asking one LLM for an answer, the Council approach broadcasts your question to multiple
                different LLMs, has them anonymously review each other's responses, and then synthesizes a final
                answer weighted by peer evaluations.
            </p>

            <div class="advantage-list">
                <div class="advantage-item">
                    <span class="advantage-icon">üåê</span>
                    <div class="advantage-text">
                        <h4>Diverse Perspectives</h4>
                        <p>Different models have different training data and reasoning patterns</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-icon">üîç</span>
                    <div class="advantage-text">
                        <h4>Peer Review</h4>
                        <p>Models critique each other anonymously, reducing self-bias</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-icon">‚öñÔ∏è</span>
                    <div class="advantage-text">
                        <h4>Weighted Synthesis</h4>
                        <p>Final answer prioritizes higher-rated responses</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-icon">üõ°Ô∏è</span>
                    <div class="advantage-text">
                        <h4>Robustness</h4>
                        <p>Less susceptible to individual model hallucinations</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- The 3-Stage Process -->
        <section class="framework-section">
            <h2>The 3-Stage Process</h2>

            <div class="stage-flow">
                <div class="stage-box">
                    <span class="stage-number">1</span>
                    <span class="stage-name">Divergence</span>
                    <span class="stage-desc">Parallel polling of multiple LLMs</span>
                </div>
                <span class="arrow">&rarr;</span>
                <div class="stage-box">
                    <span class="stage-number">2</span>
                    <span class="stage-name">Convergence</span>
                    <span class="stage-desc">Anonymous peer review</span>
                </div>
                <span class="arrow">&rarr;</span>
                <div class="stage-box">
                    <span class="stage-number">3</span>
                    <span class="stage-name">Synthesis</span>
                    <span class="stage-desc">Chairman integrates ratings</span>
                </div>
            </div>

            <h3>Stage 1: Divergence</h3>
            <p>
                Your decision question is broadcast in parallel to all configured LLM providers (Azure OpenAI,
                Anthropic Claude, Google Gemini). Each model analyzes the question independently without seeing
                other responses. This maximizes the "solution space" by exploring different reasoning approaches.
            </p>

            <h3>Stage 2: Convergence (Peer Review)</h3>
            <p>
                Each LLM then reviews the responses from other models anonymously (labeled as "Response A",
                "Response B", etc.). They rate each response on accuracy, insight, and actionability, producing
                a score from 1-10 with a written critique. This creates a "rating matrix" showing how models
                evaluate each other.
            </p>

            <div class="matrix-example">
                <h4 style="margin-bottom: 12px;">Example Rating Matrix</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Reviewer \ Target</th>
                            <th>LLM 1</th>
                            <th>LLM 2</th>
                            <th>LLM 3</th>
                            <th>Avg Given</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>LLM 1</strong></td>
                            <td>-</td>
                            <td class="score-cell high">8</td>
                            <td class="score-cell medium">6</td>
                            <td>7.0</td>
                        </tr>
                        <tr>
                            <td><strong>LLM 2</strong></td>
                            <td class="score-cell high">7</td>
                            <td>-</td>
                            <td class="score-cell high">8</td>
                            <td>7.5</td>
                        </tr>
                        <tr>
                            <td><strong>LLM 3</strong></td>
                            <td class="score-cell high">9</td>
                            <td class="score-cell medium">6</td>
                            <td>-</td>
                            <td>7.5</td>
                        </tr>
                        <tr style="background: rgba(16, 185, 129, 0.1);">
                            <td><strong>Avg Received</strong></td>
                            <td><strong>8.0</strong></td>
                            <td><strong>7.0</strong></td>
                            <td><strong>7.0</strong></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <p style="margin-top: 12px; font-size: 0.85em; color: var(--text-muted);">
                    In this example, LLM 1 received the highest average score (8.0) and would likely be chosen as Chairman.
                </p>
            </div>

            <h3>Stage 3: Synthesis</h3>
            <p>
                The highest-rated model (or a pre-configured "Chairman") synthesizes all responses into a final
                recommendation. The Chairman weighs perspectives based on their peer review scores, giving more
                influence to higher-rated responses while still considering minority viewpoints.
            </p>
        </section>

        <!-- Supported Providers -->
        <section class="framework-section">
            <h2>Supported LLM Providers</h2>
            <p>
                The Council currently supports three major LLM providers. You need at least 2 providers configured
                to use the Council method.
            </p>

            <div class="provider-grid">
                <div class="provider-card">
                    <h4>Azure OpenAI</h4>
                    <p>GPT-4 Turbo - Microsoft's enterprise-grade deployment of OpenAI models</p>
                </div>
                <div class="provider-card">
                    <h4>Anthropic Claude</h4>
                    <p>Claude 3.5 Sonnet - Known for nuanced reasoning and safety</p>
                </div>
                <div class="provider-card">
                    <h4>Google Gemini</h4>
                    <p>Gemini 1.5 Pro - Google's multimodal AI with strong analytical capabilities</p>
                </div>
            </div>

            <div class="code-block">
# Configure providers in your .env file
AZURE_OPENAI_ENDPOINT=https://your-instance.openai.azure.com
AZURE_OPENAI_API_KEY=your_azure_key
ANTHROPIC_API_KEY=your_anthropic_key
GOOGLE_API_KEY=your_google_key

# Optional: Set which model acts as Chairman
COUNCIL_CHAIRMAN_PROVIDER=anthropic
            </div>
        </section>

        <!-- Comparison with Consensus -->
        <section class="framework-section">
            <h2>Council vs. Executive Consensus</h2>
            <p>
                The Product Strategy Console offers two decision methods. Here's how they compare:
            </p>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Aspect</th>
                        <th>Executive Consensus</th>
                        <th>LLM Council</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Models Used</strong></td>
                        <td>Single LLM with 4 personas (CFO, CPO, CTO, CRO)</td>
                        <td>3 different LLMs (Azure, Anthropic, Google)</td>
                    </tr>
                    <tr>
                        <td><strong>Diversity Source</strong></td>
                        <td>Role-based prompts (same underlying model)</td>
                        <td>Different training data and architectures</td>
                    </tr>
                    <tr>
                        <td><strong>Evaluation Method</strong></td>
                        <td>Statistical alignment (std deviation of scores)</td>
                        <td>Peer review with rating matrix</td>
                    </tr>
                    <tr>
                        <td><strong>Final Decision</strong></td>
                        <td>Synthesizer LLM combines all perspectives</td>
                        <td>Chairman LLM weighs by peer ratings</td>
                    </tr>
                    <tr>
                        <td><strong>Best For</strong></td>
                        <td>Domain-specific analysis from different roles</td>
                        <td>Reducing single-model bias and hallucinations</td>
                    </tr>
                    <tr>
                        <td><strong>Cost</strong></td>
                        <td>~$0.10 per decision (6 API calls)</td>
                        <td>~$0.50-0.80 per decision (10 API calls)</td>
                    </tr>
                </tbody>
            </table>

            <p>
                <strong>Tip:</strong> Use the "Both (Compare)" option to run both methods simultaneously and
                see if they reach the same conclusion. Agreement between methods increases confidence in the
                recommendation.
            </p>
        </section>

        <!-- When to Use -->
        <section class="framework-section">
            <h2>When to Use Each Method</h2>

            <h3>Use Executive Consensus when:</h3>
            <ul style="margin-left: 20px; color: var(--text-muted); line-height: 1.8;">
                <li>You want domain-specific analysis (financial, product, technical, revenue)</li>
                <li>Cost efficiency is a priority</li>
                <li>You trust the underlying LLM's general reasoning</li>
                <li>You want faster results (single provider, parallel execution)</li>
            </ul>

            <h3>Use LLM Council when:</h3>
            <ul style="margin-left: 20px; color: var(--text-muted); line-height: 1.8;">
                <li>The decision is high-stakes and you want multiple perspectives</li>
                <li>You're concerned about model-specific biases or blind spots</li>
                <li>You want to see how different AI models approach the same problem</li>
                <li>You value the peer review process for quality assurance</li>
            </ul>

            <h3>Use Both when:</h3>
            <ul style="margin-left: 20px; color: var(--text-muted); line-height: 1.8;">
                <li>The decision is critical and you want maximum confidence</li>
                <li>You want to validate one method's recommendation against another</li>
                <li>You're curious about how different approaches affect the outcome</li>
            </ul>
        </section>

        <!-- Credit -->
        <div class="credit">
            <p>
                The LLM Council concept is inspired by
                <a href="https://virtuslab.com/blog/ai/llm-council/" target="_blank">VirtusLab's blog post</a>
                on multi-model decision-making, influenced by Andrej Karpathy's ideas on avoiding model monoculture.
            </p>
        </div>
    </div>
</body>
</html>
